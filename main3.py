from PoissonGenerator import PoissonGenerator
from FloorsModel import FloorsModel
import matplotlib.pyplot as plt
import numpy as np

Ys = []
segs = 3600
elevators = 3
floors = 6

results = []
for lamb in np.arange(0.1, 2.1, 0.1):
    pg = PoissonGenerator(lamb, segs)
    env = FloorsModel(elevators, floors, pg, segs/10)
    i = 0
    while i < 3600 or len(env.peopleSimulator.people) > 0 or len(env.schedule.agents[0].peopleInside) > 0 or len(env.schedule.agents[1].peopleInside) > 0:
        env.step()
        i += 1
    r = sum(env.timePeople)/len(env.timePeople)
    print(r)
    results.append(r)

print(results)


resultsT2 = [21.210103858962643, 23.944354490438528, 27.690222358660588, 30.47191203059351, 33.836964934816876, 36.59863013618455, 38.594629187617755, 41.09840148056553, 43.885026228968634, 45.216529042139264, 46.944901097031334, 49.977270683895746, 52.210785425427915, 53.989646737643476, 56.84482866818026, 59.96419595007279, 62.68474240822301, 66.55855388896461, 68.40659894143391, 71.34498827301944]
resultsT1 = [17.31690239532581, 21.688077465045808, 26.233507151954928, 29.654784073853158, 32.45894690875451, 34.6360137841845, 35.79973228114175, 37.42314460308113, 38.422796114535664, 39.841033211462644, 41.44342353653731, 43.14614307753016, 44.56226792314436, 45.225574728432605, 46.68289756647705, 48.3583418723587, 50.746424189187586, 51.85512695074592, 55.331867437513196, 55.57221389145572]
resultsT3 = [19.88944363076058, 21.6870650442343, 23.463066533472634, 25.138620840572653, 26.336754764354282, 27.463354584888698, 27.99389625859616, 28.528645380161073, 28.7535918353389, 29.231927909877207, 29.473406355388853, 29.662297641423528, 30.133890852151183, 30.77684287731831, 30.879509159740913, 31.122473813313707, 31.356438857936883, 31.88127236966069, 32.581367093980376, 32.6485267862537]


roT1_1 = [22.757105943152453, 28.846582984658298, 31.20472440944882, 35.0754052149401, 36.75055309734513, 42.23069810448451, 41.513964313421255, 42.85358146067416, 45.85278878390734, 54.11066017316017, 48.675187969924814, 47.541617819460726, 51.143383149231106, 60.837095191364085, 51.05802423797282, 54.57653866386113, 62.25450041288192, 67.64545595293389, 67.53783231083844, 71.11676605186521]
roT1_2 = [22.03804347826087, 28.887931034482758, 31.371014492753623, 35.04808362369338, 37.50188679245283, 40.478400735294116, 41.940514469453376, 44.55352209944751, 46.75, 43.67111111111111, 49.582124352331604, 50.27828886844526, 53.30504786771105, 56.440610747570894, 61.511688797456515, 58.02785419532324, 61.04367666232073, 61.835064331111454, 68.95856515373353, 64.35636313389526]
roT1_3 = [20.643712574850298, 29.384615384615383, 31.472627737226276, 35.731241473397, 36.76157804459691, 37.9958041958042, 39.7506817296455, 40.91933779499824, 44.06149651620721, 45.2475, 47.55992751747347, 49.63162726646775, 51.469392077949585, 53.846848615747106, 57.802224281742355, 60.48466898954704, 60.14467741935484, 65.40895013936203, 68.04437213429966, 73.46637652674436]
roT1_4 = [21.34393063583815, 27.962131837307155, 33.213893967093234, 35.72535690006798, 38.61590145576708, 38.95260223048327, 41.915979583824104, 43.59952445652174, 45.92056217537427, 45.31587790534864, 50.38571787779733, 51.629339305711085, 54.12128816394814, 54.06206896551724, 56.42527224934285, 58.728155339805824, 61.997368421052634, 66.54006484483557, 72.51691513761467, 72.88312768612228]
roT1_5 = [23.07774798927614, 27.20989505247376, 33.698606271777, 35.251178451178454, 38.009529147982065, 38.05338242061666, 43.63463098134631, 44.59743411927878, 43.19913819636811, 46.1486856516977, 52.14745038934941, 52.4778348110126, 53.12204391891892, 56.58522615050365, 55.56150234741784, 60.9226037929267, 59.39703703703704, 67.41134099616858, 68.67995849392233, 69.2763966480447]
roT1_6 = [21.924198250728864, 28.684782608695652, 33.53026196928636, 34.20500676589987, 37.144657534246576, 38.59837910850968, 38.488871224165344, 44.22642163661581, 42.01787394167451, 46.93844400113993, 49.4837428642343, 52.622667273554846, 54.278083933870285, 56.452247732973184, 56.39414163885799, 59.83063533507398, 59.135194585448396, 60.953427200990255, 69.7405906195715, 70.99115655658422]
roT1_8 = [20.95977011494253, 27.75251798561151, 32.19164396003633, 34.5625, 36.932491767288695, 41.0019550342131, 40.161353032659406, 42.51190887124611, 46.30368098159509, 48.03102291783119, 50.83445357231765, 49.2909436653197, 54.47683807904802, 55.185199686765856, 57.71906291328169, 57.40309672929715, 58.62629757785467, 69.59007156997107, 72.03367496339678, 69.36116478056859]
roT1_9 = [22.719101123595507, 28.12857142857143, 32.46015180265655, 34.428367783321455, 36.39823008849557, 37.801980198019805, 41.74586939417781, 40.873021335168616, 46.75894769042521, 44.275208913649024, 49.38653366583541, 50.02299117510451, 55.818675579695004, 57.60485736314572, 58.0948051948052, 59.48991900740996, 63.86726783736751, 66.99737126952219, 62.33730158730159, 67.55078976034858]
roT1_10 = [22.48753462603878, 27.89855072463768, 32.594339622641506, 35.33607118412046, 36.73910645339217, 39.217577197149645, 42.176516942474386, 44.93496765406878, 44.834597875569045, 46.1977304964539, 48.307326831707925, 50.82368835847782, 54.168765743073045, 54.20391451967246, 61.13178733031674, 62.62013212795549, 59.47352423612222, 66.4523076923077, 66.40671971706455, 74.1523378582202]




# fig = plt.figure()
# plt.plot(np.arange(0.1, 2.1, 0.1), results, label="Ordinary", linestyle='dotted')
# plt.plot(np.arange(0.1, 2.1, 0.1), resultsT1, label="RL")
# plt.ylim((0, 80))
# plt.legend(loc='best')
# plt.xlabel("(a) Taxa de pessoas (λ)")
# plt.ylabel("Tempo médio de serviço (s)")
# plt.show()



